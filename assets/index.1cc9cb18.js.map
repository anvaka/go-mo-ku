{"version":3,"file":"index.1cc9cb18.js","sources":["../../vite/modulepreload-polyfill","../../node_modules/query-state/node_modules/ngraph.events/index.js","../../node_modules/query-state/lib/inMemoryHistory.js","../../node_modules/query-state/lib/query.js","../../node_modules/query-state/lib/windowHistory.js","../../node_modules/query-state/index.js","../../src/utils/clamp.js","../../src/GameCursor.js","../../src/HTMLBoardInputHandler.js","../../src/HTMLBoardRenderer.js","../../node_modules/ngraph.events/index.js","../../src/utils/copyToClipboard.js","../../src/createControlsManager.js","../../src/Position.js","../../src/GameBoard.js","../../src/createInitializedGameBoardFromQueryString.js","../../main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","module.exports = function(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","/**\n * Provides a `null` object that matches history API\n */\nmodule.exports = inMemoryHistory;\n\nfunction inMemoryHistory(defaults) {\n  var listeners = [];\n  var lastQueryObject = defaults;\n\n  return {\n    dispose: dispose,\n    onChanged: onChanged,\n    set: set,\n    get: get\n  };\n\n  function get() {\n    return lastQueryObject;\n  }\n\n  function set(newQueryObject) {\n    lastQueryObject = newQueryObject;\n    setTimeout(function() {\n      triggerChange(newQueryObject);\n    }, 0);\n  }\n\n  function dispose() {\n    listeners = [];\n  }\n\n  function onChanged(changeCallback) {\n    if (typeof changeCallback !== 'function') {\n      throw new Error('changeCallback should be a function')\n    }\n\n    listeners.push(changeCallback);\n  }\n\n  function triggerChange(appState) {\n    listeners.forEach(function(listener) {\n      listener(appState);\n    });\n  }\n}\n","/**\n * This module is similar to JSON, but it encodes/decodes in query string\n * format `key1=value1...`\n */\nmodule.exports = {\n  parse: parse,\n  stringify: stringify\n};\n\nfunction stringify(object) {\n  if (!object) return '';\n\n  return Object.keys(object).map(toPairs).join('&');\n\n  function toPairs(key) {\n    var value = object[key];\n    var pair = encodePart(key);\n    if (value !== undefined) {\n      pair += '=' + encodeValue(value);\n    }\n\n    return pair;\n  }\n}\n\nfunction parse(queryString) {\n  var query = Object.create(null);\n\n  if (!queryString) return query;\n\n  queryString.split('&').forEach(decodeRecord);\n\n  return query;\n\n  function decodeRecord(queryRecord) {\n    if (!queryRecord) return;\n\n    var pair = queryRecord.split('=');\n    query[decodeURIComponent(pair[0])] = decodeValue(pair[1]);\n  }\n}\n\nfunction encodeValue(value) {\n  // TODO: Do I need this?\n  // if (typeof value === 'string') {\n  //   if (value.match(/^(true|false)$/)) {\n  //     // special handling of strings that look like booleans\n  //     value = JSON.stringify('' + value);\n  //   } else if (value.match(/^-?\\d+\\.?\\d*$/)) {\n  //     // special handling of strings that look like numbers\n  //     value = JSON.stringify('' + value);\n  //   }\n  // }\n  if (value instanceof Date) {\n    value = value.toISOString();\n  }\n  var uriValue = encodePart(value);\n  return uriValue;\n}\n\nfunction encodePart(part) {\n  // We want to make sure that we also encode symbols like ( and ) correctly\n  var encoded = encodeURIComponent(part);\n  return encoded.replace(/[()]/g, saferEscape);\n}\n\nfunction saferEscape(character) {\n  if (character === ')') return '%29';\n  if (character === '(') return '%28';\n  return character; // What?\n}\n\n/**\n * This method returns typed value from string\n */\nfunction decodeValue(value) {\n  value = decodeURIComponent(value);\n\n  if (value === \"\") return value;\n  if (!isNaN(value)) return parseFloat(value);\n  if (isBolean(value)) return value === 'true';\n  if (isISODateString(value)) return new Date(value);\n\n  return value;\n}\n\nfunction isBolean(strValue) {\n  return strValue === 'true' || strValue === 'false';\n}\n\nfunction isISODateString(str) {\n  return str && str.match(/(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))/)\n}\n","/**\n * Uses `window` to monitor hash and update hash\n */\nmodule.exports = windowHistory;\n\nvar inMemoryHistory = require('./inMemoryHistory.js');\nvar query = require('./query.js');\n\nfunction windowHistory(defaults, options) {\n  // If we don't support window, we are probably running in node. Just return\n  // in memory history\n  if (typeof window === 'undefined') return inMemoryHistory(defaults);\n\n  // Store all `onChanged()` listeners here, so that we can have just one\n  // `hashchange` listener, and notify one listeners within single event.\n  var listeners = [];\n\n  var useSearchPart = options && options.useSearch; // prefer query ? over hash #\n\n  // This prefix is used for all query strings. So our state is stored as\n  // my-app.com/#?key=value\n  var hashPrefix = useSearchPart ? '?' : '#?';\n\n  if (options.rewriteHashToSearch) {\n    rewriteHashToSearch();\n  }\n  init();\n\n  // This is our public API:\n  return {\n    /**\n     * Adds callback that is called when hash change happen. Callback receives\n     * current hash string with `#?` sign\n     * \n     * @param {Function} changeCallback - a function that is called when hash is\n     * changed. Callback gets one argument that represents the new state.\n     */\n    onChanged: onChanged,\n\n    /**\n     * Releases all resources\n     */\n    dispose: dispose,\n\n    /**\n     * Sets a new app state\n     *\n     * @param {object} appState - the new application state, that should be\n     * persisted in the hash string\n     */\n    set: set,\n\n    /**\n     * Gets current app state\n     */\n    get: getStateFromHash,\n\n    /**\n     * Allows to rewrite current hash url into search url\n     */\n    rewriteHashToSearch: rewriteHashToSearch\n  };\n\n  // Public API is over. You can ignore this part.\n\n  function init() {\n    var stateFromHash = getStateFromHash();\n    var stateChanged = false;\n\n    if (typeof defaults === 'object' && defaults) {\n      Object.keys(defaults).forEach(function(key) {\n        if (key in stateFromHash) return;\n\n        stateFromHash[key] = defaults[key]\n        stateChanged = true;\n      });\n    }\n\n    if (stateChanged) set(stateFromHash);\n  }\n\n  function rewriteHashToSearch() {\n    var mergedState = Object.create(null);\n\n    var searchString = window.location.search;\n    if (searchString) mergedState = Object.assign(mergedState, query.parse(searchString.substr(1)));\n\n    var hashString = window.location.hash;\n    if (hashString) mergedState = Object.assign(mergedState, query.parse(hashString.substr(2)));\n\n    set(mergedState);\n  }\n\n  function set(appState) {\n    var hash = hashPrefix + query.stringify(appState);\n    if (useSearchPart && window.location.hash) {\n      // preserve hash if it was there.\n      hash += window.location.hash;\n    }\n\n    if (window.history) {\n      window.history.replaceState(undefined, undefined, hash);\n    } else {\n      window.location.replace(hash);\n    }\n  }\n\n  function onChanged(changeCallback) {\n    if (typeof changeCallback !== 'function') throw new Error('changeCallback needs to be a function');\n\n    // we start listen just once, only if we didn't listen before:\n    if (listeners.length === 0) {\n      window.addEventListener('hashchange', onHashChanged, false);\n    }\n\n    listeners.push(changeCallback);\n  }\n\n  function dispose() {\n    if (listeners.length === 0) return; // no need to do anything.\n\n    // Let garbage collector collect all listeners;\n    listeners = [];\n\n    // And release hash change event:\n    window.removeEventListener('hashchange', onHashChanged, false);\n  }\n\n  function onHashChanged() {\n    var appState = getStateFromHash();\n    notifyListeners(appState);\n  }\n\n  function notifyListeners(appState) {\n    for (var i = 0; i < listeners.length; ++i) {\n      var listener = listeners[i];\n      listener(appState);\n    }\n  }\n\n  function getStateFromHash() {\n    var baseString = useSearchPart ? window.location.search : window.location.hash;\n    // or symbol || is used to get empty string when no base string is present. \n    var queryString = (baseString || hashPrefix).substr(hashPrefix.length);\n    return query.parse(queryString);\n  }\n}\n","/**\n * Allows application to access and update current app state via query string\n */\nmodule.exports = queryState;\n\nvar eventify = require('ngraph.events');\nvar windowHistory = require('./lib/windowHistory.js');\n\n/**\n * Just a convenience function that returns singleton instance of a query state\n */\nqueryState.instance = instance;\n\n// this variable holds singleton instance of the query state\nvar singletonQS;\n\n/**\n * Creates new instance of the query state.\n */\nfunction queryState(defaults, options) {\n  options = options || {};\n  var history = options.history || windowHistory(defaults, options);\n  validateHistoryAPI(history);\n\n  history.onChanged(updateQuery)\n\n  var query = history.get() || Object.create(null);\n\n  var api = {\n\n    /**\n     * Gets current state.\n     *\n     * @param {string?} keyName if present then value for this key is returned.\n     * Otherwise the entire app state is returned.\n     */\n    get: getValue,\n\n    /**\n     * Merges current app state with new key/value.\n     *\n     * @param {string} key name\n     * @param {string|number|date} value\n     */\n    set: setValue,\n\n    /**\n     * Removes value from the query string\n     */\n    unset: unsetValue,\n\n    /**\n     * Similar to `set()`, but only sets value if it was not set before.\n     *\n     * @param {string} key name\n     * @param {string|number|date} value\n     */\n    setIfEmpty: setIfEmpty,\n\n    /**\n     * Releases all resources acquired by query state. After calling this method\n     * no hash monitoring will happen and no more events will be fired.\n     */\n    dispose: dispose,\n\n    onChange: onChange,\n    offChange: offChange,\n\n    getHistoryObject: getHistoryObject,\n  }\n\n  var eventBus = eventify({});\n\n  return api;\n\n  function onChange(callback, ctx) {\n    eventBus.on('change', callback, ctx);\n  }\n\n  function offChange(callback, ctx) {\n    eventBus.off('change', callback, ctx)\n  }\n\n  function getHistoryObject() {\n    return history;\n  }\n\n  function dispose() {\n    // dispose all history listeners\n    history.dispose();\n\n    // And remove our own listeners\n    eventBus.off();\n  }\n\n  function getValue(keyName) {\n    if (keyName === undefined) return query;\n\n    return query[keyName];\n  }\n\n  function setValue(keyName, value) {\n    var keyNameType = typeof keyName;\n\n    if (keyNameType === 'object') {\n      Object.keys(keyName).forEach(function(key) {\n        query[key] = keyName[key];\n      });\n    } else if (keyNameType === 'string') {\n      query[keyName] = value;\n    }\n\n    history.set(query);\n\n    return api;\n  }\n\n  function unsetValue(keyName) {\n    if (!(keyName in query)) return; // nothing to do\n\n    delete query[keyName];\n    history.set(query);\n\n    return api;\n  }\n\n  function updateQuery(newAppState) {\n    query = newAppState;\n    eventBus.fire('change', query);\n  }\n\n  function setIfEmpty(keyName, value) {\n    if (typeof keyName === 'object') {\n      Object.keys(keyName).forEach(function(key) {\n        // TODO: Can I remove code duplication? The main reason why I don't\n        // want recursion here is to avoid spamming `history.set()`\n        if (key in query) return; // key name is not empty\n\n        query[key] = keyName[key];\n      });\n    }\n\n    if (keyName in query) return; // key name is not empty\n    query[keyName] = value;\n\n    history.set(query);\n\n    return api;\n  }\n}\n\n/**\n * Returns singleton instance of the query state.\n *\n * @param {Object} defaults - if present, then it is passed to the current instance\n * of the query state. Defaults are applied only if they were not present before.\n */\nfunction instance(defaults, options) {\n  if (!singletonQS) {\n    singletonQS = queryState(defaults, options);\n  } else if (defaults) {\n    singletonQS.setIfEmpty(defaults);\n  }\n\n  return singletonQS;\n}\n\nfunction validateHistoryAPI(history) {\n  if (!history) throw new Error('history is required');\n  if (typeof history.dispose !== 'function') throw new Error('dispose is required');\n  if (typeof history.onChanged !== 'function') throw new Error('onChanged is required');\n}\n","export default function clamp(x, min, max) {\n  return Math.min(Math.max(x, min), max);\n}","import clamp from './utils/clamp.js';\n\n/**\n * Game cursor renders a visual cue where next move will be performed.\n */\nexport default class GameCursor {\n  constructor(container, board, cellSize) {\n    this.container = container;\n    this.board = board;\n    this.cellSize = cellSize;\n\n    const cursor = document.createElement('div');\n    cursor.className = 'cursor';\n    cursor.style.position = 'absolute';\n    cursor.style.width = (cellSize - 1) + 'px';\n    cursor.style.height = (cellSize - 1) + 'px';\n    container.appendChild(cursor);\n\n    this.cursor = cursor;\n    this.renderAt(0, 0);\n  }\n\n  renderAt(cellX, cellY, scrollIntoView = false) {\n    cellX = clamp(cellX, 0, this.board.width - 1);\n    cellY = clamp(cellY, 0, this.board.height - 1);\n    this.lastX = cellX;\n    this.lastY = cellY;\n    this.cursor.style.left = (cellX * this.cellSize + 1) + 'px';\n    this.cursor.style.top = (cellY * this.cellSize + 1) + 'px';\n    if (scrollIntoView) this.cursor.scrollIntoView();\n  }\n}\n","import GameCursor from './GameCursor.js';\nimport clamp from './utils/clamp.js';\n\n/**\n * This class manages user input and updates the game cursor/board.\n */\nexport default class HTMLBoardInputHandler {\n  constructor(container, board, cellUISize) {\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n\n    this.container = container;\n    this.board = board;\n    this.gameCursor = new GameCursor(container, board, cellUISize); \n    this.cellUISize = cellUISize;\n    this.listenToEvents();\n  }\n\n  listenToEvents() {\n    this.container.addEventListener('mousemove', this.onMouseMove);\n    this.container.addEventListener('click', this.onClick);\n    this.container.addEventListener('keydown', this.onKeyDown);\n  }\n\n  dispose() {\n    this.container.removeEventListener('mousemove', this.onMouseMove);\n    this.container.removeEventListener('click', this.onClick);\n    this.container.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (e.metaKey || e.ctrlKey) return; // if command key is down - ignore\n\n    if (e.keyCode === 32 || e.keyCode === 13) { // space or enter\n      this.board.play(this.gameCursor.lastX, this.gameCursor.lastY);\n      e.preventDefault();\n    } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 72) { // left or A or H\n      this.gameCursor.renderAt(this.gameCursor.lastX - 1, this.gameCursor.lastY, true);\n      e.preventDefault();\n    } else if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 75) { // up or W or K\n      this.gameCursor.renderAt(this.gameCursor.lastX, this.gameCursor.lastY - 1, true);\n      e.preventDefault();\n    } else if (e.keyCode === 39 || e.keyCode === 68 || e.keyCode === 76) { // right or D or L\n      this.gameCursor.renderAt(this.gameCursor.lastX + 1, this.gameCursor.lastY, true);\n      e.preventDefault();\n    } else if (e.keyCode === 40 || e.keyCode === 83 || e.keyCode === 74) { // down or S or J\n      this.gameCursor.renderAt(this.gameCursor.lastX, this.gameCursor.lastY + 1, true);\n      e.preventDefault();\n    } else if (e.keyCode === 48) { // 0 - vim for the start of line\n      this.gameCursor.renderAt(0, this.gameCursor.lastY, true);\n      e.preventDefault();\n    } else if (e.keyCode === 52) { // $ - vim for the end of line\n      this.gameCursor.renderAt(this.board.width - 1, this.gameCursor.lastY, true);\n      e.preventDefault();\n    }\n  }\n\n  onMouseMove(e) {\n    const pos = this.getCellPosition(e);\n    this.gameCursor.renderAt(pos.x, pos.y);\n  }\n\n  onClick(e) {\n    e.preventDefault();\n    const pos = this.getCellPosition(e);\n    this.board.play(pos.x, pos.y);\n  }\n\n  getCellPosition(e) {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    return { \n      x: clamp(Math.floor(x / this.cellUISize), 0, this.board.width - 1),\n      y: clamp(Math.floor(y / this.cellUISize), 0, this.board.height - 1) \n    };\n  }\n}\n","import HTMLBoardInputHandler from './HTMLBoardInputHandler.js';\n\n/**\n * Renders the board with plain HTML. This renderer shows the power of \n * concern separation. If we ever decide that HTML isn't fast enough\n * to render huge boards, we can switch to a different renderer.\n * \n * We can implement virtualization, use Canvas, or even render the board\n * as a console application\n */\nexport default class HTMLBoardRenderer {\n  constructor(container, board) {\n    // First let's remember the board and the container and setup the rendering state.\n    this.container = container;\n    this.board = board;\n    this.cellUISize = Math.min(42, Math.max(36, (window.innerWidth / board.width)));\n    // Map between game model positions and UI element that represent them.\n    this.renderedPositions = new Map();\n\n    // Input handling comes in many forms (e.g. keyboard, mouse, touch, etc.)\n    // Having input handling in a separate class allows developers to\n    // easily extend the input, and keep rendering code simple:\n    this.inputHandler = new HTMLBoardInputHandler(container, board, this.cellUISize);\n\n    // Now let's make sure that everything is ready to be rendered as game changes\n    // And render the board.\n    this.listenToEvents();\n\n    // Look inside this method, it might surprise you by its simplicity:\n    this.renderBackgroundGrid();\n    this.renderPositions();\n    this.showLastMove();\n  }\n\n  /**\n   * Listen to events that come from the board and change the UI.\n   */\n  listenToEvents() {\n    this.board.on('play', this.renderPositions, this);\n    this.board.on('remove', this.removePosition, this);\n    this.board.on('clear', this.clear, this);\n    this.board.on('winLengthChanged', this.renderPositions, this);\n  }\n\n  /**\n   * dispose() and listenToEvents() methods are best kept next to each other.\n   * So that we don't forget to unsubscribe from events at the end of life.\n   */\n  dispose() {\n    this.container.innerText = '';\n    this.board.off('play', this.renderPositions);\n    this.board.off('remove', this.removePosition);\n    this.board.off('clear', this.clear);\n    this.board.off('winLengthChanged', this.renderPositions, this);\n    this.inputHandler.dispose();\n  }\n\n  showLastMove() {\n    const lastMove = document.querySelector('.last-move');\n    if (lastMove) lastMove.scrollIntoView();\n  }\n\n  focus() {\n    this.container.focus();\n  }\n\n  renderBackgroundGrid() {\n    // Instead of rendering individual cells of the board, we actually render a single\n    // div element, with a gradient background defined as a step-function.\n    // For this to work, we need to pass background size and adjust the dimensions of the\n    // container.\n    //\n    // See #board {} in style.css for the definition of the gradient.\n    this.container.style.width =  (1 + this.board.width  * this.cellUISize) + 'px';\n    this.container.style.height = (1 + this.board.height * this.cellUISize) + 'px';\n    this.container.style.backgroundSize = this.cellUISize + 'px ' + this.cellUISize + 'px';\n  }\n\n  clear() {\n    this.renderedPositions.forEach((positionElement) => {\n      positionElement.parentElement.removeChild(positionElement);\n    });\n    this.renderedPositions.clear();\n    this.renderPositions();\n  }\n\n  removePosition(position) {\n    let element = this.renderedPositions.get(position);\n    if (!element) return; // already removed;\n    element.parentElement.removeChild(element);\n    this.renderedPositions.delete(position);\n\n    this.renderWinner();\n    this.highlightLastMove();\n  }\n\n  renderPositions() {\n    this.board.positions.forEach((position) => {\n      if (this.renderedPositions.get(position)) return; // already rendered;\n      let positionElement = createPositionElement(position, this.cellUISize, this.container);\n      this.renderedPositions.set(position, positionElement);\n    });\n\n    this.renderWinner();\n    this.highlightLastMove();\n  }\n\n  renderWinner() {\n    Array.from(this.container.querySelectorAll('.winner')).forEach(x => {\n      x.classList.remove('winner');\n    });\n\n    const winner = this.board.getWinner();\n    if (winner) {\n      winner.sequence.forEach(([cellX, cellY]) => {\n        const position = this.board.getPosition(cellX, cellY);\n        this.renderedPositions.get(position).classList.add('winner');\n      })\n    } \n  }\n\n  highlightLastMove() {\n    Array.from(this.container.querySelectorAll('.last-move')).forEach(x => x.classList.remove('last-move'));\n\n    const lastMove = this.board.getLastPlayedPosition();\n    if (lastMove) this.renderedPositions.get(lastMove).classList.add('last-move');\n  }\n}\n\nfunction createPositionElement(position, size, container) {\n  let positionElement = document.createElement('div');\n  positionElement.className = 'symbol';\n  positionElement.style.width =  (size - 1) + 'px';\n  positionElement.style.height = (size - 1) + 'px';\n  positionElement.style.left = (1 + position.x * size) + 'px';\n  positionElement.style.top =  (1 + position.y * size) + 'px';\n  positionElement.style.fontSize = size + 'px';\n  positionElement.style.lineHeight = size + 'px';\n  positionElement.innerText = position.symbol;\n\n  container.appendChild(positionElement);\n  return positionElement;\n}","module.exports = function eventify(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","export default function copyTextToClipboard(text) {\n  if (!navigator.clipboard) {\n    return fallbackCopyTextToClipboard(text);\n  }\n\n  return navigator.clipboard.writeText(text);\n}\n\n\nfunction fallbackCopyTextToClipboard(text) {\n  let textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n  \n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n  textArea.style.position = \"fixed\";\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  let successful = false;\n  try {\n    successful = document.execCommand('copy');\n  } catch (err) {\n    successful = false;\n  } \n\n  document.body.removeChild(textArea);\n  return successful ? Promise.resolve() : Promise.reject(new Error('copy command was unsuccessful'));\n}","import eventify from 'ngraph.events';\nimport queryState from 'query-state';\nimport copyTextToClipboard from './utils/copyToClipboard.js';\n\n/**\n * Controls manager is a simple wrapper that handles control button clicks\n */\nexport default function createControlsManager(container, board, renderer) {\n  container.querySelector('#clear').addEventListener('click', onClearClick);\n  container.querySelector('#copy').addEventListener('click', onCopyClick);\n  container.querySelector('#hide-info').addEventListener('click', onHideInfoClick);\n\n  container.getElementById('in-a-row').value = board.winLength;\n  container.getElementById('board-width').value = board.width;\n  container.getElementById('board-height').value = board.height;\n  Array.from(container.querySelectorAll('.auto-size')).forEach(el => {\n    createAutoSizeInput(el);\n  });\n  renderNextMoveSymbol();\n  board.on('change', renderNextMoveSymbol);\n\n  let api = eventify({});\n  container.getElementById('board-width').addEventListener('change', onBoardWidthChanged);\n  container.getElementById('board-height').addEventListener('change', onBoardHeightChanged);\n  container.getElementById('in-a-row').addEventListener('change', onWinLengthChanged);\n\n  let infoHidden = queryState.instance().get('ui') === 0;\n  updateToggleUIIndicator();\n  return api;\n\n  function onHideInfoClick(e) {\n    infoHidden = !infoHidden;\n    queryState.instance().set('ui', infoHidden ? 0 : 1);\n    updateToggleUIIndicator();\n  }\n\n  function updateToggleUIIndicator() {\n    container.querySelector('#hide-info').innerText = infoHidden ? 'Show info' : 'Hide info';\n    container.querySelector('.info').style.display = infoHidden ? 'none' : 'block';\n  }\n\n  function onBoardWidthChanged(e) {\n    let width = parseInt(e.target.value, 10);\n    if (width > 2) {\n      api.fire('resize', width, board.height);\n    } \n  }\n\n  function onBoardHeightChanged(e) {\n    let height = parseInt(e.target.value, 10);\n    if (height > 2) {\n      api.fire('resize', board.width, height);\n    }\n  }\n\n  function onWinLengthChanged(e) {\n    let winLength = parseInt(e.target.value, 10);\n    if (winLength > 2) {\n      api.fire('win-condition-change', winLength);\n    }\n  }\n\n  function onClearClick(e) {\n    e.preventDefault();\n    board.clear();\n    renderer.focus();\n  }\n\n  function onCopyClick(e) {\n    e.preventDefault();\n  \n    copyTextToClipboard(window.location.href).then(() => {\n      temporaryText(container.querySelector('#copy'), 'Copied!');\n    }).catch(() => {\n      temporaryText(container.querySelector('#copy'), 'Failed to copy');\n    });\n  }\n\n  function renderNextMoveSymbol() {\n    container.getElementById('next-move').innerText = board.getNextMoveSymbol();\n  }\n}\n\nfunction temporaryText(el, text) {\n  const prevText = el.innerText;\n\n  el.innerText = text;\n  setTimeout(() => {\n    el.innerText = prevText;\n  }, 500);\n}\n\nfunction createAutoSizeInput(el) {\n  let measuringSpan = document.createElement('span');\n  measuringSpan.style.visibility = 'hidden';\n  measuringSpan.style.position = 'absolute';\n  measuringSpan.style.top = '-9999px';\n  measuringSpan.style.left = '-9999px';\n  measuringSpan.style.width = 'auto';\n  measuringSpan.style.height = 'auto';\n  measuringSpan.style.whiteSpace = 'nowrap';\n\n  let style = window.getComputedStyle(el);\n  measuringSpan.style.fontFamily = style.fontFamily;\n  measuringSpan.style.fontSize = style.fontSize;\n  document.body.appendChild(measuringSpan);\n\n  el.addEventListener('change', onInputChanged);\n  el.addEventListener('keydown', onInputChanged);\n  el.addEventListener('keyup', onInputChanged);\n  onInputChanged({target: el});\n\n  function onInputChanged(e) {\n    measuringSpan.innerText = e.target.value;\n    el.style.width = measuringSpan.offsetWidth + 'px';\n  }\n}","/**\n * Position holds coordinates of a symbol along with information about \n * win condition checks.\n * \n * See more in GameBoard.js file to learn about win condition algorithm\n * (getWinner() method).\n */\nexport default class Position {\n  constructor(x, y, symbol) {\n    this.x = x;\n    this.y = y;\n    this.symbol = symbol;\n    this.lDiagonalChecked = false;\n    this.rDiagonalChecked = false;\n    this.horizontalChecked = false;\n    this.verticalChecked = false;\n  }\n\n  clean() {\n    this.lDiagonalChecked = false;\n    this.rDiagonalChecked = false;\n    this.horizontalChecked = false;\n    this.verticalChecked = false;\n  }\n}\n","import eventify from 'ngraph.events';\nimport Position from './Position.js';\n\n/**\n * Game board stores game logic, without any dependencies on UI. It can be reused in\n * any platform and framework where javascript is supported.\n */\nexport default class GameBoard {\n  constructor(width, height, winLength = 5, playerSymbols = 'XO') {\n    this.width = width;\n    this.height = height;\n    this.winLength = winLength;\n    this.positions = [];\n    this.lookup = Object.create(null);\n\n    // We use array destructuring here to access to unicode symbols.\n    this.playerSymbols = [...playerSymbols];\n    this.currentPlayer = 0;\n\n    // This would turn GameBoard into event emitter, allowing us to create\n    // loose coupling between components.\n    eventify(this);\n  }\n\n\n  /**\n   * Adjust size of the board. It cleans the current board.\n   */\n  resize(width, height) {\n    this.clear();\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * Update required length of the sequence to win.\n   */\n  setWinCondition(winLength) {\n    this.winLength = winLength;\n    this.fire('winLengthChanged');\n  }\n\n\n  play(x, y) {\n    const cellPos = this.getPosition(x, y);\n    if (cellPos && cellPos === this.getLastPlayedPosition()) {\n      // can only undo the last move:\n      this.undoLastMove();\n    } else {\n      this.placeSymbol(x, y);\n    }\n  }\n\n  /**\n   * Places a symbol at given position. If position is already occupied,\n   * it returns false. Otherwise it returns true.\n   */\n  placeSymbol(x, y, symbol) {\n    if (x < 0 || x >= this.width || y < 0 || y >= this.height) {\n      throw new Error(`Invalid position ${x}, ${y}`);\n    }\n\n    if (this.getPosition(x, y)) {\n      // Position is already taken\n      return false;\n    }\n\n    if (!symbol) {\n      symbol = this.playerSymbols[this.currentPlayer];\n    }\n\n    const pos = new Position(x, y, symbol);\n\n    let row = this.lookup[y];\n    if (!row) this.lookup[y] = row = {};\n    let col = row[x];\n    if (col) {\n      // we should never reach hear, but in case if someone messed up the\n      // `gethPosition()` check, we defensively throw.\n      throw new Error(`Position ${x}, ${y} is already occupied`);\n    }\n    row[x] = pos;\n    this.positions.push(pos);\n\n    this.currentPlayer = this.positions.length % this.playerSymbols.length;\n\n    this.fire('play');\n    this.fire('change');\n\n    return true;\n  }\n\n  /**\n   * Returns last played position or null if there was no moves yet.\n   */\n  getLastPlayedPosition() {\n    if (this.positions.length === 0) return null;\n    return this.positions[this.positions.length - 1];\n  }\n\n  undoLastMove() {\n    let last = this.getLastPlayedPosition();\n    if (!last) return;\n\n    let {x, y} = last;\n    let row = this.lookup[y];\n    delete row[x];\n\n    this.positions.pop();\n    this.currentPlayer = this.positions.length % this.playerSymbols.length;\n    this.fire('remove', last);\n    this.fire('change');\n  }\n\n  clear() {\n    this.positions = [];\n    this.lookup = Object.create(null);\n    this.currentPlayer = 0;\n    this.fire('clear');\n    this.fire('change');\n  }\n\n  getNextMoveSymbol() {\n    return this.playerSymbols[this.currentPlayer];\n  }\n\n  getPosition(x, y) {\n    let row = this.lookup[y];\n    if (!row) return;\n    return row[x];\n  }\n\n  /**\n   * This method will check the winner of the game. If there is no winner then\n   * nothing is returned. Otherwise a {symbol, sequence} object is returned.\n   */\n  getWinner() {\n    this.positions.forEach(pos => pos.clean());\n\n    // Note: This code is fast. It can be made even faster if we limit scope to\n    // check positions within `winLength` range to the last played symbol.\n    // \n    // The idea is to check every unchecked symbol and its adjacent symbols on vertical,\n    // horizontal, diagonal, and anti-diagonal directions. \n    //\n    // If length of the adjacent symbols in any direction is not less than `winLength`,\n    // then we have a winner.\n    //\n    // As we check every played position, we mark it as checked based on direction of the check.\n    // So that next time we visit it, we don't have to repeat the work. Fast and simple.\n    for (let pos of this.positions) {\n      let sequence = \n        filterWinner(getLongestSequence(pos, this, -1, 0, 1, 0, 'horizontalChecked'), this.winLength) ||\n        filterWinner(getLongestSequence(pos, this, 0, -1,  0, 1, 'verticalChecked'), this.winLength) ||\n        filterWinner(getLongestSequence(pos, this, -1, -1, 1, 1, 'lDiagonalChecked'), this.winLength) ||\n        filterWinner(getLongestSequence(pos, this, -1,  1, 1, -1, 'rDiagonalChecked'), this.winLength);\n      if (sequence) {\n        return {\n          symbol: this.getPosition(sequence[0][0], sequence[0][1]).symbol,\n          sequence\n        }\n      }\n    }\n  }\n\n}\n\n/**\n * This method will return a bounding box of the longest sequence of the same symbol in a given\n * direction. Direction is defined by \"mirroring\" strategy of board traversal. \n * \n * For example, if we are checking \"horizontal\" direction, we need to check everything to the left\n * (leftDx = -1, leftDy = 0) and to the right (rightDx = 1, rightDy = 0).\n * \n * We use `checkName` to mark checked positions and eliminate repetitive work.\n */\nfunction getLongestSequence(pos, board, leftDx, leftDy, rightDx, rightDy, checkName) {\n  if (pos[checkName]) return; // already checked\n\n  let minLeft = pos.x;\n  let minTop = pos.y;\n\n  let leftSymbol = board.getPosition(minLeft + leftDx, minTop + leftDy);\n  pos[checkName] = true;\n\n  while (leftSymbol && leftSymbol.symbol === pos.symbol) {\n    minLeft += leftDx;\n    minTop += leftDy;\n\n    leftSymbol[checkName] = true;\n    leftSymbol = board.getPosition(minLeft + leftDx, minTop + leftDy);\n  }\n\n  let maxRight = pos.x;\n  let maxBottom = pos.y;\n  let rightSymbol = board.getPosition(pos.x + rightDx, pos.y + rightDy);\n  while (rightSymbol && rightSymbol.symbol === pos.symbol) {\n    maxRight += rightDx;\n    maxBottom += rightDy;\n    rightSymbol[checkName] = true;\n    rightSymbol = board.getPosition(maxRight + rightDx, maxBottom + rightDy);\n  }\n\n  return {minLeft, minTop, maxRight, maxBottom, dx: rightDx, dy: rightDy};\n}\n\n/**\n * Given a bounding box of the longest sequence, this function\n * will return a winner if the length of the sequence is greater\n * than or equal to `winLength`.\n * \n * Otherwise undefined is returned.\n */\nfunction filterWinner(boundingBox, consequentSymbolCountToWin) {\n  if (!boundingBox) return; // No winner here.\n\n  let {minLeft, minTop, maxRight, maxBottom, dx, dy} = boundingBox;\n\n  let count = 0;\n  let winner = [];\n  let ySign = maxBottom > minTop ? 1 : -1;\n  let x = minLeft; let y = minTop;\n  while (x != maxRight || y != maxBottom) {\n    winner.push([x, y]);\n    x += dx;\n    y += dy;\n  }\n  if (minLeft !== maxRight || minTop !== maxBottom) {\n    winner.push([maxRight, maxBottom]);\n  }\n  if (winner.length >= consequentSymbolCountToWin) {\n    return winner;\n  }\n}","import GameBoard from './GameBoard.js';\n\n/**\n * Query string has a limit after which we can't send request to the server. So if our\n * encoded sequence of moves is too long, we split it into query string + hash.\n */\nconst MAX_QUERY_LENGTH = 512 + 256;\n\n/**\n * This creates a GameBoard and initializes it with values from the query string.\n */\nexport default function createInitializedGameBoardFromQueryString(qs) {\n  const board = new GameBoard(qs.get('w'), qs.get('h'), qs.get('l'), qs.get('s'));\n\n  // first, replay the moves from the query string\n  decodeMoveSequence(getMoveSequence(qs), board.width).forEach(playMoveFromQueryString);\n\n  // then start listen to board changes and update query string as necessary:\n  board.on('change', throttle(updateUrl));\n\n  return board;\n\n  function updateUrl() {\n    let sequence = encodeMoveSequence(board.positions, board.width);\n    qs.set('m', sequence.mainQuery);\n    if (sequence.overflow) {\n      window.location.hash = '#o=' + sequence.overflow;\n    } else {\n      window.location.hash = '';\n    }\n  }\n\n  function playMoveFromQueryString(m) {\n    try {\n      board.play(m[0], m[1]);\n    } catch (e) {\n      // Query string could not be related to have a valid move.\n      console.error(e.message);\n    }\n  }\n}\n\nfunction decodeMoveSequence(encodedSequence, w) {\n  if (encodedSequence === '')\n    return [];\n\n  try {\n    return ('' + encodedSequence).split('_').map(encodedPoint => {\n      let absoluteAddress = Number.parseInt(encodedPoint, 36);\n      let row = Math.floor(absoluteAddress / w);\n      let col = absoluteAddress % w;\n      return [row, col];\n    });\n  } catch (e) {\n    console.error('Failed to decode sequence', e);\n    return [];\n  }\n}\n\nfunction encodeMoveSequence(moves, width) {\n  let mainQuery = moves.map(p => (p.x * width + p.y).toString(36)).join('_');\n  let overflow = '';\n  if (mainQuery.length > MAX_QUERY_LENGTH) {\n    overflow = mainQuery.slice(MAX_QUERY_LENGTH)\n    mainQuery = mainQuery.slice(0, MAX_QUERY_LENGTH);\n  }\n  return {mainQuery, overflow};\n}\n\nfunction getMoveSequence(qs) {\n  let sequence = qs.get('m')\n  if (window.location.hash.indexOf('o=') > 0) {\n    sequence += window.location.hash.slice(window.location.hash.indexOf('o=') + 2);\n  }\n  return sequence;\n}\n\nfunction throttle(fn) {\n  let timeout;\n  return function() {\n    clearTimeout(timeout);\n    timeout = setTimeout(fn, 10);\n  }\n}","/**\n * Entry point to the application is here.\n */\nimport './style.css'\n\nimport queryState from 'query-state';\nimport HTMLBoardRenderer from './src/HTMLBoardRenderer.js';\nimport createControlsManager from './src/createControlsManager.js';\nimport createInitializedGameBoardFromQueryString from './src/createInitializedGameBoardFromQueryString.js';\n\n// Query string is used with these default values:\nconst defaultQueryStringValues = {\n  w: 15,   // Number of horizontal cells (width)\n  h: 15,   // Number of vertical cells (height)\n  s: 'XO', // Player symbols. You can add more if you want more than 2 players.\n  l: 5,    // Number of same symbols in a row to win\n  m: ''    // Current sequence of moves. Decoded/Encoded inside createInitializedGameBoardFromQueryString()\n};\n\nconst qs = queryState.instance(defaultQueryStringValues, {useSearch: true});\n\nlet board = createInitializedGameBoardFromQueryString(qs);\nlet renderer = new HTMLBoardRenderer(document.getElementById('board'), board);\n\n// final bit, let's listen to the user actions on the \"Controls\" strip\nlet controlsManager = createControlsManager(document, board, renderer);\ncontrolsManager.on('resize', rebuildBoard);\ncontrolsManager.on('win-condition-change', updateWinCondition);\n\n// Just in case if someone wants to play with it via console\nwindow.board = board;\n\nfunction rebuildBoard(width, height) {\n  renderer.dispose();\n  board.resize(width, height);\n  qs.set({\n    w: width,\n    h: height\n  })\n  renderer = new HTMLBoardRenderer(document.getElementById('board'), board);\n}\n\nfunction updateWinCondition(winCondition) {\n  qs.set({\n    l: winCondition\n  });\n  board.setWinCondition(winCondition);\n}"],"names":["p","relList","link","processPreload","mutations","mutation","node","getFetchOpts","script","fetchOpts","ngraph_events","subject","validateSubject","eventsStorage","createEventsStorage","registeredEvents","eventName","callback","ctx","handlers","wantToRemoveAll","deleteAllCallbacksForEvent","callbacks","i","fireArguments","callbackInfo","reservedWords","inMemoryHistory_1","inMemoryHistory","defaults","listeners","lastQueryObject","dispose","onChanged","set","get","newQueryObject","triggerChange","changeCallback","appState","listener","query","parse","stringify","object","toPairs","key","value","pair","encodePart","encodeValue","queryString","decodeRecord","queryRecord","decodeValue","uriValue","part","encoded","saferEscape","character","isBolean","isISODateString","strValue","str","windowHistory_1","windowHistory","require$$0","require$$1","options","useSearchPart","hashPrefix","rewriteHashToSearch","init","getStateFromHash","stateFromHash","stateChanged","mergedState","searchString","hashString","hash","onHashChanged","notifyListeners","baseString","queryState_1","queryState","eventify","instance","singletonQS","history","validateHistoryAPI","updateQuery","api","getValue","setValue","unsetValue","setIfEmpty","onChange","offChange","getHistoryObject","eventBus","keyName","keyNameType","newAppState","clamp","x","min","max","GameCursor","container","board","cellSize","cursor","cellX","cellY","scrollIntoView","HTMLBoardInputHandler","cellUISize","pos","rect","y","HTMLBoardRenderer","lastMove","positionElement","position","element","createPositionElement","winner","size","copyTextToClipboard","text","fallbackCopyTextToClipboard","textArea","successful","createControlsManager","renderer","onClearClick","onCopyClick","onHideInfoClick","el","createAutoSizeInput","renderNextMoveSymbol","onBoardWidthChanged","onBoardHeightChanged","onWinLengthChanged","infoHidden","updateToggleUIIndicator","e","width","height","winLength","temporaryText","prevText","measuringSpan","style","onInputChanged","Position","symbol","GameBoard","playerSymbols","cellPos","row","last","sequence","filterWinner","getLongestSequence","leftDx","leftDy","rightDx","rightDy","checkName","minLeft","minTop","leftSymbol","maxRight","maxBottom","rightSymbol","boundingBox","consequentSymbolCountToWin","dx","dy","MAX_QUERY_LENGTH","createInitializedGameBoardFromQueryString","qs","decodeMoveSequence","getMoveSequence","playMoveFromQueryString","throttle","updateUrl","encodeMoveSequence","m","encodedSequence","w","encodedPoint","absoluteAddress","col","moves","mainQuery","overflow","fn","timeout","defaultQueryStringValues","controlsManager","rebuildBoard","updateWinCondition","winCondition"],"mappings":"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"}